import{r as o,R as s}from"./index-uubelm5h.js";import{s as j}from"./story_background-BKGiVFcq.js";import"./index-ahidj9UV.js";import{N as S}from"./NexButton-Ds72D61U.js";import{j as v}from"./jsx-runtime-QvZ8i92b.js";import{u as O,f as H,M as A,a as D,P as G,L as W,m as J}from"./motion-DmbHi9R8.js";function T(){const t=o.useRef(!1);return O(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Q(){const t=T(),[r,e]=o.useState(0),a=o.useCallback(()=>{t.current&&e(r+1)},[r]);return[o.useCallback(()=>H.postRender(a),[a]),r]}class X extends o.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:t,isPresent:r}){const e=o.useId(),a=o.useRef(null),c=o.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=o.useContext(A);return o.useInsertionEffect(()=>{const{width:m,height:i,top:f,left:d}=c.current;if(r||!a.current||!m||!i)return;a.current.dataset.motionPopId=e;const n=document.createElement("style");return u&&(n.nonce=u),document.head.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${i}px !important;
            top: ${f}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(n)}},[r]),v.jsx(X,{isPresent:r,childRef:a,sizeRef:c,children:o.cloneElement(t,{ref:a})})}const L=({children:t,initial:r,isPresent:e,onExitComplete:a,custom:c,presenceAffectsLayout:u,mode:m})=>{const i=D(Z),f=o.useId(),d=o.useMemo(()=>({id:f,initial:r,isPresent:e,custom:c,onExitComplete:n=>{i.set(n,!0);for(const l of i.values())if(!l)return;a&&a()},register:n=>(i.set(n,!1),()=>i.delete(n))}),u?[Math.random()]:[e]);return o.useMemo(()=>{i.forEach((n,l)=>i.set(l,!1))},[e]),o.useEffect(()=>{!e&&!i.size&&a&&a()},[e]),m==="popLayout"&&(t=v.jsx(Y,{isPresent:e,children:t})),v.jsx(G.Provider,{value:d,children:t})};function Z(){return new Map}function _(t){return o.useEffect(()=>()=>t(),[])}const h=t=>t.key||"";function P(t,r){t.forEach(e=>{const a=h(e);r.set(a,e)})}function ee(t){const r=[];return o.Children.forEach(t,e=>{o.isValidElement(e)&&r.push(e)}),r}const te=({children:t,custom:r,initial:e=!0,onExitComplete:a,exitBeforeEnter:c,presenceAffectsLayout:u=!0,mode:m="sync"})=>{const i=o.useContext(W).forceRender||Q()[0],f=T(),d=ee(t);let n=d;const l=o.useRef(new Map).current,k=o.useRef(n),x=o.useRef(new Map).current,y=o.useRef(!0);if(O(()=>{y.current=!1,P(d,x),k.current=n}),_(()=>{y.current=!0,x.clear(),l.clear()}),y.current)return v.jsx(v.Fragment,{children:n.map(p=>v.jsx(L,{isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:u,mode:m,children:p},h(p)))});n=[...n];const R=k.current.map(h),b=d.map(h),q=R.length;for(let p=0;p<q;p++){const g=R[p];b.indexOf(g)===-1&&!l.has(g)&&l.set(g,void 0)}return m==="wait"&&l.size&&(n=[]),l.forEach((p,g)=>{if(b.indexOf(g)!==-1)return;const M=x.get(g);if(!M)return;const B=R.indexOf(g);let N=p;if(!N){const K=()=>{l.delete(g);const w=Array.from(x.keys()).filter(E=>!b.includes(E));if(w.forEach(E=>x.delete(E)),k.current=d.filter(E=>{const z=h(E);return z===g||w.includes(z)}),!l.size){if(f.current===!1)return;i(),a&&a()}};N=v.jsx(L,{isPresent:!1,onExitComplete:K,custom:r,presenceAffectsLayout:u,mode:m,children:M},h(M)),l.set(g,N)}n.splice(B,0,N)}),n=n.map(p=>{const g=p.key;return l.has(g)?p:v.jsx(L,{isPresent:!0,presenceAffectsLayout:u,mode:m,children:p},h(p))}),v.jsx(v.Fragment,{children:l.size?n:n.map(p=>o.cloneElement(p))})};function ne(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];t&&t.addEventListener&&t.addEventListener.apply(t,r)}function re(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];t&&t.removeEventListener&&t.removeEventListener.apply(t,r)}var ae=["mousedown","touchstart"],se=function(t,r,e){e===void 0&&(e=ae);var a=o.useRef(r);o.useEffect(function(){a.current=r},[r]),o.useEffect(function(){for(var c=function(f){var d=t.current;d&&!d.contains(f.target)&&a.current(f)},u=0,m=e;u<m.length;u++){var i=m[u];ne(document,i,c)}return function(){for(var f=0,d=e;f<d.length;f++){var n=d[f];re(document,n,c)}}},[e,t])};const I=({logoSrc:t,displayName:r,identity:e,navItems:a,identityProps:c})=>{const[u,m]=o.useState(!1),i=o.useRef(null);se(i,n=>{n.target.closest(".nex-nav-burger")||m(!1)});const f=()=>{m(!u)},d={initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0,transition:{delay:.2}},transition:{duration:.3}};return s.createElement(s.Fragment,null,s.createElement("div",{className:"nex-nav"},s.createElement("nav",{className:"nex-nav-inner-wrapper"},t?s.createElement("div",{className:"nex-nav-client-logo"},s.createElement("img",{src:t,alt:r,className:"nex-nav-logo"})):s.createElement("div",{className:"nex-nav-client-name"},s.createElement("div",{className:"client-name"},r)),s.createElement("ul",{className:"nex-nav-list"},a.length&&a.map((n,l)=>s.createElement("li",{key:l,className:"nex-nav-item",onClick:n.onClick},s.createElement("a",{className:"nex-nav-link"},n.label)))),e&&s.createElement("div",{className:"identity"},s.createElement("div",{className:"identity-item text-button",onClick:c==null?void 0:c.onLoginClick},"Log in"),s.createElement(S,{className:"identity-item",text:"Sign Up",onClick:c==null?void 0:c.onSignUpClick,inverted:!0})))),s.createElement("div",{className:`nex-nav-burger ${u?"menu-open":""}`,onClick:f},s.createElement("div",null),s.createElement("div",null),s.createElement("div",null)),s.createElement(te,null,u&&s.createElement(s.Fragment,null,s.createElement(J.div,{...d,className:"nex-nav-mobile",ref:i,"aria-label":"Sidebar"},s.createElement("div",{className:"nex-nav-list"},a.length&&a.map((n,l)=>s.createElement("li",{key:l,className:"nex-nav-item",onClick:f},s.createElement("a",{className:"nex-nav-link"},n.label)))),e&&s.createElement("div",{className:"identity"},s.createElement(S,{className:"identity-item",text:"Login",onClick:c==null?void 0:c.onLoginClick,inverted:!0}),s.createElement(S,{className:"identity-item",text:"Sign Up",type:"primary",onClick:c==null?void 0:c.onSignUpClick,inverted:!0}))))))},V=I;try{I.displayName="NexNav",I.__docgenInfo={description:"",displayName:"NexNav",props:{logoSrc:{defaultValue:null,description:"",name:"logoSrc",required:!1,type:{name:"string"}},displayName:{defaultValue:null,description:"",name:"displayName",required:!0,type:{name:"string"}},identity:{defaultValue:null,description:"",name:"identity",required:!0,type:{name:"boolean"}},navItems:{defaultValue:null,description:"",name:"navItems",required:!0,type:{name:"NavItem[]"}},identityProps:{defaultValue:null,description:"",name:"identityProps",required:!1,type:{name:"IdentityProps"}}}}}catch{}const fe={title:"NexComponent/NexNav",component:V,tags:["autodocs"]},oe=t=>s.createElement("div",{style:{height:"200vh",backgroundImage:`url(${j})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"}},s.createElement(V,{...t})),C=oe.bind({});C.args={displayName:"CMDT",identity:!0,navItems:[{label:"Home",onClick:()=>console.log("Home clicked")},{label:"About",onClick:()=>console.log("About clicked")},{label:"Services",onClick:()=>console.log("Services clicked")},{label:"Contact",onClick:()=>console.log("Contact clicked")}],identityProps:{onLoginClick:()=>console.log("Login clicked"),onSignUpClick:()=>console.log("Sign Up clicked")}};var U,$,F;C.parameters={...C.parameters,docs:{...(U=C.parameters)==null?void 0:U.docs,source:{originalSource:`args => <div style={{
  height: '200vh',
  backgroundImage: \`url(\${storyBackround})\`,
  backgroundSize: 'cover',
  backgroundRepeat: 'no-repeat'
}}>\r
    <NexNav {...args} />\r
  </div>`,...(F=($=C.parameters)==null?void 0:$.docs)==null?void 0:F.source}}};const pe=["NexNavTest"];export{C as NexNavTest,pe as __namedExportsOrder,fe as default};
