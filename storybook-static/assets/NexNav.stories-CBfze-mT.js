import{r,R as a}from"./index-CTjT7uj6.js";import{s as K}from"./story_background-BKGiVFcq.js";import"./index-8m3wGU1D.js";import{N as M}from"./NexButton-CvoBVPUS.js";import{j as h}from"./jsx-runtime-Cw0GR0a5.js";import{u as T,f as j,M as A,a as D,P as G,L as W,m as Y}from"./motion-CD0aH4T1.js";function B(){const t=r.useRef(!1);return T(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function J(){const t=B(),[n,e]=r.useState(0),o=r.useCallback(()=>{t.current&&e(n+1)},[n]);return[r.useCallback(()=>j.postRender(o),[o]),n]}class Q extends r.Component{getSnapshotBeforeUpdate(n){const e=this.props.childRef.current;if(e&&n.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:t,isPresent:n}){const e=r.useId(),o=r.useRef(null),p=r.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=r.useContext(A);return r.useInsertionEffect(()=>{const{width:d,height:c,top:g,left:i}=p.current;if(n||!o.current||!d||!c)return;o.current.dataset.motionPopId=e;const s=document.createElement("style");return l&&(s.nonce=l),document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${c}px !important;
            top: ${g}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(s)}},[n]),h.jsx(Q,{isPresent:n,childRef:o,sizeRef:p,children:r.cloneElement(t,{ref:o})})}const w=({children:t,initial:n,isPresent:e,onExitComplete:o,custom:p,presenceAffectsLayout:l,mode:d})=>{const c=D(Z),g=r.useId(),i=r.useMemo(()=>({id:g,initial:n,isPresent:e,custom:p,onExitComplete:s=>{c.set(s,!0);for(const u of c.values())if(!u)return;o&&o()},register:s=>(c.set(s,!1),()=>c.delete(s))}),l?[Math.random()]:[e]);return r.useMemo(()=>{c.forEach((s,u)=>c.set(u,!1))},[e]),r.useEffect(()=>{!e&&!c.size&&o&&o()},[e]),d==="popLayout"&&(t=h.jsx(X,{isPresent:e,children:t})),h.jsx(G.Provider,{value:i,children:t})};function Z(){return new Map}function _(t){return r.useEffect(()=>()=>t(),[])}const E=t=>t.key||"";function P(t,n){t.forEach(e=>{const o=E(e);n.set(o,e)})}function ee(t){const n=[];return r.Children.forEach(t,e=>{r.isValidElement(e)&&n.push(e)}),n}const te=({children:t,custom:n,initial:e=!0,onExitComplete:o,exitBeforeEnter:p,presenceAffectsLayout:l=!0,mode:d="sync"})=>{const c=r.useContext(W).forceRender||J()[0],g=B(),i=ee(t);let s=i;const u=r.useRef(new Map).current,C=r.useRef(s),m=r.useRef(new Map).current,x=r.useRef(!0);if(T(()=>{x.current=!1,P(i,m),C.current=s}),_(()=>{x.current=!0,m.clear(),u.clear()}),x.current)return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(w,{isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:l,mode:d,children:f},E(f)))});s=[...s];const R=C.current.map(E),b=i.map(E),V=R.length;for(let f=0;f<V;f++){const v=R[f];b.indexOf(v)===-1&&!u.has(v)&&u.set(v,void 0)}return d==="wait"&&u.size&&(s=[]),u.forEach((f,v)=>{if(b.indexOf(v)!==-1)return;const S=m.get(v);if(!S)return;const q=R.indexOf(v);let y=f;if(!y){const H=()=>{u.delete(v);const I=Array.from(m.keys()).filter(N=>!b.includes(N));if(I.forEach(N=>m.delete(N)),C.current=i.filter(N=>{const z=E(N);return z===v||I.includes(z)}),!u.size){if(g.current===!1)return;c(),o&&o()}};y=h.jsx(w,{isPresent:!1,onExitComplete:H,custom:n,presenceAffectsLayout:l,mode:d,children:S},E(S)),u.set(v,y)}s.splice(q,0,y)}),s=s.map(f=>{const v=f.key;return u.has(v)?f:h.jsx(w,{isPresent:!0,presenceAffectsLayout:l,mode:d,children:f},E(f))}),h.jsx(h.Fragment,{children:u.size?s:s.map(f=>r.cloneElement(f))})};function ne(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];t&&t.addEventListener&&t.addEventListener.apply(t,n)}function re(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];t&&t.removeEventListener&&t.removeEventListener.apply(t,n)}var ae=["mousedown","touchstart"],oe=function(t,n,e){e===void 0&&(e=ae);var o=r.useRef(n);r.useEffect(function(){o.current=n},[n]),r.useEffect(function(){for(var p=function(g){var i=t.current;i&&!i.contains(g.target)&&o.current(g)},l=0,d=e;l<d.length;l++){var c=d[l];ne(document,c,p)}return function(){for(var g=0,i=e;g<i.length;g++){var s=i[g];re(document,s,p)}}},[e,t])};const L=({logoSrc:t,displayName:n,homeButtonHandler:e,identity:o,navItems:p,identityProps:l})=>{const[d,c]=r.useState(!1),[g,i]=r.useState(!0),s=r.useRef(null);oe(s,m=>{m.target.closest(".nex-nav-burger")||c(!1)});const u=()=>{c(!d)};r.useEffect(()=>{const m=()=>{window.scrollY===0?i(!0):i(!1)};return window.addEventListener("scroll",m),m(),()=>{window.removeEventListener("scroll",m)}},[]);const C={initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0,transition:{delay:.2}},transition:{duration:.3}};return a.createElement(a.Fragment,null,a.createElement("div",{className:`nex-nav ${g?"":"not-at-top"}`},a.createElement("nav",{className:"nex-nav-inner-wrapper"},t?a.createElement("div",{className:"nex-nav-client-logo",onClick:e},a.createElement("img",{src:t,alt:n,className:"nex-nav-logo"})):a.createElement("div",{className:"nex-nav-client-name",onClick:e},a.createElement("div",{className:"client-name"},n)),a.createElement("ul",{className:"nex-nav-list"},p.length&&p.map((m,x)=>a.createElement("li",{key:x,className:"nex-nav-item",onClick:m.onClick},a.createElement("a",{className:"nex-nav-link"},m.label)))),o&&a.createElement("div",{className:"identity"},a.createElement("div",{className:"identity-item text-button",onClick:l==null?void 0:l.onLoginClick},"Log in"),a.createElement(M,{className:"identity-item",text:"Sign Up",onClick:l==null?void 0:l.onSignUpClick,inverted:!0})))),a.createElement("div",{className:`nex-nav-burger ${d?"menu-open":""}`,onClick:u},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null)),a.createElement(te,null,d&&a.createElement(a.Fragment,null,a.createElement(Y.div,{...C,className:"nex-nav-mobile",ref:s,"aria-label":"Sidebar"},a.createElement("div",{className:"nex-nav-list"},p.length&&p.map((m,x)=>a.createElement("li",{key:x,className:"nex-nav-item",onClick:u},a.createElement("a",{className:"nex-nav-link"},m.label)))),o&&a.createElement("div",{className:"identity"},a.createElement(M,{className:"identity-item",text:"Login",onClick:l==null?void 0:l.onLoginClick,inverted:!0}),a.createElement(M,{className:"identity-item",text:"Sign Up",type:"primary",onClick:l==null?void 0:l.onSignUpClick,inverted:!0}))))))},O=L;try{L.displayName="NexNav",L.__docgenInfo={description:"",displayName:"NexNav",props:{logoSrc:{defaultValue:null,description:"",name:"logoSrc",required:!1,type:{name:"string"}},displayName:{defaultValue:null,description:"",name:"displayName",required:!0,type:{name:"string"}},homeButtonHandler:{defaultValue:null,description:"",name:"homeButtonHandler",required:!0,type:{name:"() => void"}},identity:{defaultValue:null,description:"",name:"identity",required:!0,type:{name:"boolean"}},navItems:{defaultValue:null,description:"",name:"navItems",required:!0,type:{name:"NavItem[]"}},identityProps:{defaultValue:null,description:"",name:"identityProps",required:!1,type:{name:"IdentityProps"}}}}}catch{}const fe={title:"NexComponent/NexNav",component:O,tags:["autodocs"]},se=t=>a.createElement("div",{style:{height:"200vh",backgroundImage:`url(${K})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"}},a.createElement(O,{...t})),k=se.bind({});k.args={displayName:"CMDT",identity:!0,homeButtonHandler:()=>console.log("Home clicked"),navItems:[{label:"Home",onClick:()=>console.log("Home clicked")},{label:"About",onClick:()=>console.log("About clicked")},{label:"Services",onClick:()=>console.log("Services clicked")},{label:"Contact",onClick:()=>console.log("Contact clicked")}],identityProps:{onLoginClick:()=>console.log("Login clicked"),onSignUpClick:()=>console.log("Sign Up clicked")}};var U,$,F;k.parameters={...k.parameters,docs:{...(U=k.parameters)==null?void 0:U.docs,source:{originalSource:`args => <div style={{
  height: '200vh',
  backgroundImage: \`url(\${storyBackround})\`,
  backgroundSize: 'cover',
  backgroundRepeat: 'no-repeat'
}}>\r
    <NexNav {...args} />\r
  </div>`,...(F=($=k.parameters)==null?void 0:$.docs)==null?void 0:F.source}}};const pe=["NexNavTest"];export{k as NexNavTest,pe as __namedExportsOrder,fe as default};
